@model IList<FoxNetSoft.Plugin.Misc.Articles.Models.ArticleOverviewModel>
@using FoxNetSoft.Plugin.Misc.Articles.Extensions
@using FoxNetSoft.Plugin.Misc.Articles.Models
@using Nop.Web.Extensions
@using Microsoft.AspNetCore.Mvc.Rendering
<div class="article-list">
    @foreach (var item in Model)
    {
        <div class="article-box">
		    <div class="article-item" data-articleid="@item.Id">
                <div class="picture">
                    <a href="@Url.RouteUrl("ArticlePost", new { SeName = item.SeName })" title="@item.PictureModel.Title">
                        <img alt="@item.PictureModel.AlternateText" src="@item.PictureModel.ImageUrl" title="@item.PictureModel.Title" />
                    </a>
                </div>
                <div class="details">
                    <div class="article-title">
                        <a href="@Url.RouteUrl("ArticlePost", new { SeName = item.SeName })">@item.Title</a>
                        <span class="article-date">-@item.DateUserTimeZone.ToString("dddd, dd MMMM yyyy")</span>
                    </div>
                    <div class="description">
                        @Html.Raw(item.ShortBody)
                        <span class="skyblue-links">
                            <a  href="@Url.RouteUrl("ArticlePost", new { SeName = item.SeName })">@T("FoxNetSoft.Plugin.Misc.Articles.PageTitle.NextRead")</a>
                        </span>
                    </div>
                </div>
                <div class="article-details">
                    @if (item.Tags.Count > 0)
                    {
                        <div class="tags">
                            <label>@T("FoxNetSoft.Plugin.Misc.Articles.Tags"):</label>
                            <ul>
                                @for (int i = 0; i < item.Tags.Count; i++)
                                {
                                    var tag = item.Tags[i];
                                    <li><a href="@Url.RouteUrl("ArticleByTag", new {tag = tag})">@tag</a></li>
                                    if (i != item.Tags.Count - 1)
                                    {
                                        <li class="separator">,</li>
                                    }
                                }
                            </ul>
                        </div>
                    }
                <div class="buttons">
                        @if (item.AllowComments)
                        {
                            <a href="@Url.RouteUrl("ArticlePost", new {SeName = item.SeName})#comments" class="read-comments">@string.Format(T("FoxNetSoft.Plugin.Misc.Articles.CommentsLink").Text, item.NumberOfComments)</a>
                        }
                        <a href="@Url.RouteUrl("ArticlePost", new {SeName = item.SeName})" class="read-more">@T("FoxNetSoft.Plugin.Misc.Articles.MoreInfo")</a>
                    </div>
                </div>
            </div> 
        </div> 
    }
    @if (ViewBag.PagingFilteringContext!=null && ((ArticlePagingFilteringModel)ViewBag.PagingFilteringContext).AllowAjaxPager)
    {
        var pager = Html.Pager((ArticlePagingFilteringModel)ViewBag.PagingFilteringContext).QueryParam("pagenumber");
            if (!pager.IsEmpty())
            {
                <div class="pager">
                    @pager
                </div>
            }
    }
</div>

